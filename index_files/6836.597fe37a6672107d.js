!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},n=(new e.Error).stack;n&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[n]="103014ba-85e9-4be9-ae02-a3296ca3a193",e._sentryDebugIdIdentifier="sentry-dbid-103014ba-85e9-4be9-ae02-a3296ca3a193")}catch(e){}}();var _sentryModuleMetadataGlobal="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};_sentryModuleMetadataGlobal._sentryModuleMetadata=_sentryModuleMetadataGlobal._sentryModuleMetadata||{},_sentryModuleMetadataGlobal._sentryModuleMetadata[(new _sentryModuleMetadataGlobal.Error).stack]=Object.assign({},_sentryModuleMetadataGlobal._sentryModuleMetadata[(new _sentryModuleMetadataGlobal.Error).stack],{"_sentryBundlerPluginAppKey:sentry-js-hh-filter-key":!0});var _global="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};_global.SENTRY_RELEASE={id:"4148ce393327c61e83973753f885036202ae1b01"},(self.__LOADABLE_LOADED_CHUNKS_xhh__=self.__LOADABLE_LOADED_CHUNKS_xhh__||[]).push([["6836"],{24226:function(e,n,t){t.d(n,{Z:()=>s});const s=e=>{let{chatikOrigin:n,chatId:t,hhtmFromLabel:s}=e;const i=new URL(t?`${n}/chat/${t}`:n);return s&&i.searchParams.append("hhtmFromLabel",s),i.toString()}},22525:function(e,n,t){t.d(n,{W:()=>s});let s=function(e){return e.Initial="Initial",e.ResumeSelect="ResumeSelect",e.Letter="Letter",e.Done="Done",e}({})},4996:function(e,n,t){t.d(n,{Z:()=>i});var s=function(e){return e.RelatedVacancies="related_vacancies_on_vacancy_page",e.VacancySearch="vacancies",e.VacancySearchMap="vacancies_on_search_map",e.ApplicantNegotiations="applicant_negotiations",e.RecommendedVacanciesOnMain="recommended_vacancies_on_main",e.EmployerRelatedVacancies="related_employer_vacancies_on_vacancy_page",e.VacanciesOfTheDay="vacancies_of_the_day",e.EmployerVacancy="employer_vacancy",e.IndexAnonymous="index_anonymous",e.EmployerVacancySearch="employer_vacancy_search",e}(s||{});const i=s},91670:function(e,n,t){t.d(n,{O:()=>d,Z:()=>p});var s=t(/*! react */66600),i=t(/*! bloko/common/storage/LocalStorageWrapper */396),a=t.n(i),o=t(/*! src/hooks/useSelector */93435),r=t(/*! src/models/vacancyResponseQuestions */72046);const c="vacancy_response_questions_store",l={},d=e=>{let{vacancyId:n,question:t,questionId:s,dispatch:i}=e;const o={id:s,value:t};a().setItem(`${c}_${n}`,JSON.stringify(o)),i((0,r.Yi)({[String(n)]:o}))},p=()=>{const e=(0,o.v)((e=>e.vacancyResponseQuestions));return(0,s.useCallback)((n=>e[String(n)]||(e=>{if(void 0===e)return null;if(e in l)return l[e];const n=a().getItem(`${c}_${e}`);let t=null;if(n)try{t=JSON.parse(n)}catch(e){}return l[e]=t,t})(n)),[e])}},82509:function(e,n,t){t.d(n,{Z:()=>o});var s=t(/*! src/models/userType */52769),i=t(/*! src/hooks/useExperiment */55233),a=t(/*! src/hooks/useSelector */93435);function o(){const e=(0,a.v)((e=>e.userType===s.F.Applicant)),n=(0,i.ZP)("web_magritte_response_b",e),t=(0,i.ZP)("web_magritte_response_c",e);return{isMagritteResponseExpB:n,isMagritteResponseExpC:t,isMagritteResponseExpAny:n||t}}},84812:function(e,n,t){t.d(n,{Eo:()=>r,U4:()=>p,c3:()=>m,g5:()=>a,hl:()=>l,qd:()=>d,uH:()=>o,zd:()=>c});var s=t(/*! prop-types */65528),i=t.n(s);let a=function(e){return e.Everyone="everyone",e.Clients="clients",e.WhiteList="whitelist",e.BlackList="blacklist",e.Direct="direct",e.NoOne="no_one",e}({});const o=a.Everyone,r=a.Clients,c=a.WhiteList,l=a.BlackList,d=a.Direct,p=a.NoOne,u=[o,r,c,l,d,p];const m=i().oneOf(u)},48267:function(e,n,t){t.d(n,{Z:()=>i});var s=function(e){return e.Advertising="advertising",e.Normal="normal",e}(s||{});const i=s},4142:function(e,n,t){t.d(n,{Z:()=>i});var s=function(e){return e.Favorite="FAVORITE",e.Response="RESPONSE",e.Invite="INVITE",e.Discard="DISCARD",e.Question="QUESTION",e}(s||{});const i=s},57154:function(e,n,t){t.d(n,{Z:()=>a});var s=t(/*! final-form */66115),i=t(/*! Utils/ScrollTop */37427);const a=e=>{let{name:n}=e;return e=>{let t={};const a=e.subscribe((e=>{const n=e.submitErrors&&"string"!=typeof e.submitErrors?e.submitErrors:{};t={...e.errors,...n}}),{errors:!0,submitErrors:!0}),o=e.submit;return e.submit=()=>{const a=o.call(e)||Promise.resolve(void 0);return a.then((()=>{if(!t||!Object.keys(t).length)return;const e=document.forms.namedItem(n);if(!e)return;const a=[...e.querySelectorAll("[data-form-error-name]"),...e.elements].find((e=>{const n=e,i=n.getAttribute("data-form-error-name")||n.getAttribute("name");return i&&(0,s.u9)(t,i)&&n.offsetWidth}))||document.querySelector('[data-form-error="true"]');if(!a)return;const o=a.getBoundingClientRect().top-document.body.getBoundingClientRect().top-20;(0,i.default)({top:o})})),a},()=>{a(),e.submit=o}}}},95870:function(e,n,t){t.d(n,{l:()=>s});const s=(e,n)=>{let t;return t=e.length>1?`${e.slice(0,-1).join(", ")} ${n} ${e.slice(-1)[0]}`:e.join(", "),t}},39604:function(e,n,t){t.d(n,{Z:()=>a});var s=t(/*! react/jsx-runtime */57796);const i=e=>{let{children:n,isShrinked:t}=e;const i=t?"row-content_schrinked":"row-content";return(0,s.jsx)("div",{className:i,children:n})};i.displayName="components/RowContent/index/RowContent";const a=i},52119:function(e,n,t){t.d(n,{V:()=>c,Z:()=>p});var s=t(/*! bloko/blocks/translateGuard */10937),i=t.n(s),a=t(/*! bloko/common/trl */58479),o=t(/*! src/components/translation */11288),r=t(/*! react/jsx-runtime */57796);let c=function(e){return e.Unknown="unknown",e.LetterRequired="letter-required",e.TestRequired="test-required",e.TestServiceDown="test-service-down",e.NegotiationsLimitExceeded="negotiations-limit-exceeded",e.TooLongLetter="too-long-letter",e.ChangeResumeVisibilityDenied="change-resume-visibility-denied",e.AlreadyApplied="alreadyApplied",e.SpamDetected="SPAM_DETECTED",e.ResourcePolicyViolation="RESOURCE_POLICY_VIOLATION",e.InappropriateLanguage="INAPPROPRIATE_LANGUAGE",e}({});const l={[c.Unknown]:"vacancy.response.popup.unknown.error",[c.LetterRequired]:"vacancy.response.popup.letter.error",[c.TestRequired]:"vacancy.response.popup.test.error",[c.TestServiceDown]:"vacancy.response.popup.testServiceDown.error",[c.NegotiationsLimitExceeded]:"vacancy.response.popup.negotiationsLimitExceeded.error",[c.TooLongLetter]:"vacancy.response.popup.letter.tooLong",[c.ChangeResumeVisibilityDenied]:"vacancy.response.popup.changeResumeVisibilityDenied.error",[c.AlreadyApplied]:"vacancy.response.popup.alreadyApplied.error",[c.SpamDetected]:"vacancy.response.popup.spamDetected",[c.ResourcePolicyViolation]:"vacancy.response.popup.resourcePolicyViolation",[c.InappropriateLanguage]:"vacancy.response.popup.inappropriateLanguage"},d=e=>{let{trls:n,code:t=c.Unknown,letterMaxLength:s}=e;return t?(0,r.jsx)(i(),{children:t===c.TooLongLetter?(0,a.format)(n[l[t]],{"{0}":null!=s?s:0}):n[l[t]]}):null};d.displayName="components/VacancyResponseError/index/VacancyResponseError";const p=(0,o.Z)(d)},59705:function(e,n,t){t.d(n,{Z:()=>E});var s=t(/*! @hh.ru/analytics-js */43529),i=t.n(s),a=t(/*! @hh.ru/magritte-ui */14223),o=t(/*! @hh.ru/magritte-ui */42993),r=t(/*! bloko/blocks/gap */84740),c=t.n(r),l=t(/*! bloko/blocks/information */3634),d=t.n(l),p=t(/*! bloko/common/trl */58479),u=t(/*! src/components/ElementShownAnchor */9169),m=t(/*! src/components/translation */11288),y=t(/*! src/hooks/useMagritteResponseExp */82509),v=t(/*! src/models/vacancyResponsePopup */12675),h=t(/*! react/jsx-runtime */57796);const f="vacancy.response.popup.inconsistency.title",b="vacancy.response.popup.inconsistency",x="vacancy.response.popup.inconsistency.lang",g={[v.c.Language]:"vacancy.response.popup.inconsistency.language",[v.c.Area]:"vacancy.response.popup.inconsistency.area",[v.c.Distance]:"vacancy.response.popup.inconsistency.distance",[v.c.Experience]:"vacancy.response.popup.inconsistency.experience"},j="resume.title.empty",R=(e,n)=>i().sendHHEventElementShown(e,{name:"vacancy_response_inconsistency",...n}),_=e=>{var n,t,s,i,r;let{inconsistencies:l,selectedResumeId:m,resumes:v,vacancyId:_,trls:E}=e;const{isMagritteResponseExpAny:S}=(0,y.Z)(),L=null==l||null===(n=l.resume)||void 0===n?void 0:n.find((e=>String(e.id)===String(m))),k=null==L||null===(t=L.inconsistencies)||void 0===t||null===(s=t.inconsistency)||void 0===s?void 0:s[0];if(null==l||!l.resume||!L||!k)return null;const I=v.find((e=>String(e.id)===String(m)));if(!I)return null;const w=null!==(i=null===(r=I.title[0])||void 0===r?void 0:r.string)&&void 0!==i?i:E[j];return S?(0,h.jsx)(u.Z,{fn:R,resumeId:m,vacancyId:_,type:null==k?void 0:k.type,children:(0,h.jsx)(a.j,{title:(0,h.jsx)(o.x,{style:"primary",typography:"title-5-semibold",children:E[f]}),content:(0,h.jsx)(o.x,{typography:"paragraph-2-regular",children:(0,p.format)(E[g[k.type]],{"{0}":`${k.languageTrl} ${E[x]}`,"{1}":w})}),style:"warning",showClose:!1,stretched:!0,visible:!0})}):(0,h.jsx)(c(),{top:!0,children:(0,h.jsx)(u.Z,{fn:R,resumeId:m,vacancyId:_,type:null==k?void 0:k.type,children:(0,h.jsxs)(d(),{children:[(0,h.jsx)("strong",{children:`${E[b]} `}),(0,p.format)(E[g[k.type]],{"{0}":`${k.languageTrl} ${E[x]}`,"{1}":w})]})})})};_.displayName="components/VacancyResponseForm/Inconsistencies/Inconsistencies";const E=(0,m.Z)(_)},97033:function(e,n,t){t.d(n,{Z:()=>L});var s=t(/*! react */66600),i=t(/*! @hh.ru/analytics-js-events/build/xhh/applicant/user_status/after_response/response_sent_element_shown */84128),a=t.n(i),o=t(/*! bloko/blocks/button */12229),r=t.n(o),c=t(/*! bloko/blocks/notificationManager/NotificationFooter */88894),l=t.n(c),d=t(/*! bloko/blocks/notificationManager/NotificationHeading */87339),p=t.n(d),u=t(/*! bloko/blocks/vSpacing */69052),m=t.n(u),y=t(/*! src/components/Applicant/JobSearchStatus/ChangeForm */86680),v=t(/*! src/components/Applicant/JobSearchStatus/useMarkAsRead */46993),h=t(/*! src/components/Notifications/ApplicantJobSearchStatusSuccess */82101),f=t(/*! src/components/Notifications/Provider */98719),b=t(/*! src/components/translation */11288),x=t(/*! src/models/applicantUserStatuses */89832),g=t(/*! react/jsx-runtime */57796);const j=x.QZ.VacancyResponseNotification,R="vacancy.view.notify.response.title",_="notification.applicant.job.search.status.afterResponse.subtitle",E="notification.applicant.job.search.status.save",S=e=>{let{trls:n,removeNotification:t,vacancyId:i}=e;const[c,d]=(0,s.useState)(!0),{addNotification:u}=(0,f.lm)(),b=(0,s.useRef)(null),S=(0,s.useRef)(!1),L=(0,s.useRef)((0,v.Z)(x.Nr.AfterVacancyResponse));return(0,s.useEffect)((()=>{b.current&&a()(b.current,{vacancyId:i})}),[i]),(0,s.useEffect)((()=>{const e=L.current;return()=>{S.current||e()}}),[]),(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)(p(),{children:n[R]}),(0,g.jsx)("div",{ref:b,children:n[_]}),(0,g.jsx)(m(),{base:4}),(0,g.jsx)(y.Z,{isCompact:!0,statusesList:[x.Lx.ActiveSearch,x.Lx.LookingForOffers],formId:j,setDisabled:d,onSuccess:()=>{S.current=!0,u(h.Z),t(!0)}}),(0,g.jsx)(l(),{children:(0,g.jsx)(r(),{type:o.ButtonType.Submit,kind:o.ButtonKind.Success,form:j,disabled:c,children:n[E]})})]})};S.displayName="components/VacancyResponseForm/JobSearchStatusNotification/JobSearchStatusNotification";const L={Element:(0,b.Z)(S),kind:"ok",autoClose:!1}},83505:function(e,n,t){t.d(n,{Z:()=>S});var s=t(/*! @hh.ru/redux-spa-middleware */90062),i=t(/*! bloko/blocks/button */12229),a=t.n(i),o=t(/*! bloko/blocks/notificationManager/NotificationFooter */88894),r=t.n(o),c=t(/*! bloko/blocks/notificationManager/NotificationHeading */87339),l=t.n(c),d=t(/*! bloko/blocks/text */88316),p=t.n(d),u=t(/*! bloko/blocks/vSpacing */69052),m=t.n(u),y=t(/*! bloko/common/trl */58479),v=t(/*! src/components/translation */11288),h=t(/*! src/models/resume/resumeCommon.types */41715),f=t(/*! react/jsx-runtime */57796);const b="resume.publish.notify.resumeAutoHide.title",x="vacancy.view.notify.response.title",g="resume.publish.notify.resumeAutoHide.subtitle",j="rb.visibility.autoHideTime.prefix.notification",R={[h.Nw.FiveYears]:"rb.visibility.autoHideTime.suffix.year_5",[h.Nw.ThreeYears]:"rb.visibility.autoHideTime.suffix.year_3",[h.Nw.TwoYears]:"rb.visibility.autoHideTime.suffix.year_2",[h.Nw.TwelveMonths]:"rb.visibility.autoHideTime.suffix.month_12",[h.Nw.TenMonths]:"rb.visibility.autoHideTime.suffix.month_10",[h.Nw.EightMonths]:"rb.visibility.autoHideTime.suffix.month_8"},_="vacancy.view.notify.response.resumeAutoHide.button",E=e=>{let{trls:n,resumeHash:t,autoHideTime:o=h.Nw.TwelveMonths,isVacancyResponse:c=!0}=e;return(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(l(),{children:c?n[x]:n[b]}),(0,f.jsx)(m(),{base:1}),!c&&(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(p(),{children:n[g]}),(0,f.jsx)(m(),{base:5})]}),(0,f.jsx)(p(),{children:(0,y.format)(n[j],{"{0}":n[R[o]]})}),(0,f.jsx)(m(),{base:2}),(0,f.jsx)(r(),{children:(0,f.jsx)(a(),{Element:s.SPALink,to:`/applicant/resumes/edit/visibility?resume=${t}`,appearance:i.ButtonAppearance.Outlined,children:n[_]})})]})};E.displayName="components/VacancyResponseForm/ResumeAutoHideNotification/ResumeAutoHideNotification";const S={Element:(0,v.Z)(E),kind:"ok",autoCloseDelay:1e4,autoClose:!0}},40794:function(e,n,t){t.d(n,{Z:()=>c});var s=t(88013),i=t(41715);function a(e){return function(e){return Object.values(i.Y0).includes(e)}(e||"")&&e!==i.Y0.Unknown?e:void 0}var o=t(57796);const r=e=>{var n,t,i,r;let{resume:c}=e;const l=null==c||null===(n=c.photoUrls)||void 0===n||null===(t=n[0])||void 0===t?void 0:t.preview;return(0,o.jsx)(s.q,{mode:"image","aria-label":null==c?void 0:c.fio,size:48,image:l,fallbackMode:"placeholder",placeholder:a(null==c||null===(i=c.gender)||void 0===i||null===(r=i[0])||void 0===r?void 0:r.string)})};r.displayName="components/VacancyResponseForm/ResumeAvatar/ResumeAvatar";const c=r},10176:function(e,n,t){t.d(n,{Z:()=>r});var s=t(/*! src/components/FormatMoney */32975),i=t(/*! src/utils/constants/symbols */77569),a=t(/*! react/jsx-runtime */57796);const o=e=>{var n,t,o;let{resume:r}=e;const c=null==r||null===(n=r.area)||void 0===n||null===(t=n[0])||void 0===t?void 0:t.title,l=null==r||null===(o=r.salary)||void 0===o?void 0:o[0];return(0,a.jsxs)(a.Fragment,{children:[c,c&&l?[i.qD,"•",i.qD].join(""):null,l?(0,a.jsx)(s.Z,{currency:l.currency,children:l.amount}):null]})};o.displayName="components/VacancyResponseForm/ResumeDetail/ResumeDetail";const r=o},85634:function(e,n,t){t.d(n,{Z:()=>pe});var s=t(66600),i=t(55796),a=t(66570),o=t(50900),r=t(42993),c=t(35936),l=t(99751),d=t(22957),p=t(11347),u=t(91146),m=t(88316),y=t.n(m),v=t(58479),h=t(11288),f=t(82509),b=t(98652),x=t.n(b),g=t(74586),j=t.n(g),R=t(32993),_=t(76363),E=t(24532),S=t(52031),L=t(90062),k=t(84740),I=t.n(k),w=t(20115),N=t.n(w),C=t(79292),A=t.n(C),Z=t(47108),V=t(40794),T=t(10176),F=t(9802),M=t(84812),P=t(95870),q=t(57796);const D=(e,n)=>{const t=e.map((e=>`«${e.name}»`));return(0,P.l)(t,n)},O={toWhitelist:"vacancy.response.popup.visibility.noOne",employerToWhitelist:"vacancy.response.popup.visibility.noOne.companyInWhiteList",whitelistIsFull:"vacancy.response.popup.visibility.noOne.responseDisabled"},H={addEmployer:"vacancy.response.popup.visibility.addToWhiteList",whitelistIsFull:"vacancy.response.popup.visibility.limitExceeded"},B={removeEmployerMany:"vacancy.response.popup.visibility.removeFromBlackList.many",removeEmployerCurrent:"vacancy.response.popup.visibility.removeFromBlackList"},$="vacancy.response.popup.visibility.changeVisibility",Q="vacancy.response.popup.unfinished.hint",U="abstract.and",W=e=>{let{trls:n,resume:t,visibility:a,vacancy:d,hidden:p,incomplete:u,visible:m,isQuestion:y}=e;const h=(0,s.useRef)(null),{collapsibleClasses:f}=(0,i.u)(h,m,[m]),{isMobile:b}=(0,R.Z)();if(!a||p)return null;const x=t.hash,g=[];if(u&&!y&&g.push((0,q.jsx)(r.x,{Element:"p",style:"secondary",typography:"label-3-regular",children:n[Q]},"incomplete")),[M.U4,M.zd,M.hl].includes(a.accessType)){let e;a.accessType===M.U4&&(e=a.whitelist.containsEmployer?(0,v.format)(n[O.employerToWhitelist],{"{0}":d.company.visibleName}):!a.whitelist.containsEmployer&&a.whitelist.canAdd<=0?n[O.whitelistIsFull]:(0,v.format)(n[O.toWhitelist],{"{0}":d.company.visibleName})),a.accessType!==M.zd||a.whitelist.containsEmployer||(e=a.whitelist.canAdd<=0?(0,v.format)(n[H.whitelistIsFull],{"{0}":a.whitelist.limit}):(0,v.format)(n[H.addEmployer],{"{0}":d.company.visibleName})),a.accessType===M.hl&&a.connectedEmployers.length&&(e=1===a.connectedEmployers.length?(0,v.format)(n[B.removeEmployerCurrent],{"{0}":d.company.visibleName}):(0,v.format)(n[B.removeEmployerMany],{"{0}":d.name,"{1}":D(a.connectedEmployers,n[U])})),e&&g.push((0,q.jsxs)(o.z,{default:8,children:[(0,q.jsx)(r.x,{Element:"p",style:"secondary",typography:"label-3-regular",children:e}),(0,q.jsx)(l.r,{Element:L.SPALink,to:`/applicant/resumes/edit/visibility?resume=${x}`,target:"_blank",iconLeft:(0,q.jsx)(F.Z,{}),typography:"label-3-regular",children:n[$]})]},"visibility"))}if(!g.length)return null;const j=(0,q.jsxs)(E.b,{children:[(0,q.jsx)(c.X,{default:16}),(0,q.jsx)(o.z,{default:16,children:g})]});return b?m?j:null:(0,q.jsx)("div",{ref:h,className:f,children:j})};W.displayName="components/VacancyResponseForm/ResumeHint/ResumeHint";const z=(0,h.Z)(W);var G=t(65528),Y=t.n(G);const K=(e,n)=>{const t=e.map((e=>`«${e.name}»`));return(0,P.l)(t,n)},J=e=>{let{resume:n,visibility:t,vacancy:s,hidden:i,trls:a}=e;if(!t||i)return null;const o=n.hash;let r;return t.accessType===M.U4&&(r=t.whitelist.containsEmployer?(0,v.format)(a[J.trls.noOne.employerToWhitelist],{"{0}":s.company.visibleName}):!t.whitelist.containsEmployer&&t.whitelist.canAdd<=0?a[J.trls.noOne.whitelistIsFull]:(0,v.format)(a[J.trls.noOne.toWhitelist],{"{0}":s.company.visibleName})),t.accessType!==M.zd||t.whitelist.containsEmployer||(r=t.whitelist.canAdd<=0?(0,v.format)(a[J.trls.whitelist.whitelistIsFull],{"{0}":t.whitelist.limit}):(0,v.format)(a[J.trls.whitelist.addEmployer],{"{0}":s.company.visibleName})),t.accessType===M.hl&&t.connectedEmployers.length&&(r=1===t.connectedEmployers.length?(0,v.format)(a[J.trls.blacklist.removeEmployerCurrent],{"{0}":s.company.visibleName}):(0,v.format)(a[J.trls.blacklist.removeEmployerMany],{"{0}":s.name,"{1}":K(t.connectedEmployers,a[J.trls.and])})),r?(0,q.jsx)("div",{className:"vacancy-response-popup-resume__hint",children:(0,q.jsxs)(u.FormHint,{children:[r," ",(0,q.jsx)(N(),{disableVisited:!0,Element:L.SPALink,to:`/applicant/resumes/edit/visibility?resume=${o}`,target:"_blank",children:a[J.trls.changeVisibility]})]})}):null};J.displayName="components/VacancyResponseForm/VisibilityHint/VisibilityHint",J.trls={noOne:{toWhitelist:"vacancy.response.popup.visibility.noOne",employerToWhitelist:"vacancy.response.popup.visibility.noOne.companyInWhiteList",whitelistIsFull:"vacancy.response.popup.visibility.noOne.responseDisabled"},whitelist:{addEmployer:"vacancy.response.popup.visibility.addToWhiteList",whitelistIsFull:"vacancy.response.popup.visibility.limitExceeded"},blacklist:{removeEmployerMany:"vacancy.response.popup.visibility.removeFromBlackList.many",removeEmployerCurrent:"vacancy.response.popup.visibility.removeFromBlackList"},changeVisibility:"vacancy.response.popup.visibility.changeVisibility",and:"abstract.and"},J.propTypes={resume:Y().object,visibility:Y().object,vacancy:Y().object,hidden:Y().bool,trls:Y().object};const X=(0,h.Z)(J),ee={view:"vacancy.response.popup.resume.link",toSettings:"vacancy.response.popup.resume.settings"},ne="vacancy.response.popup.unfinished.hint",te="resume.title.empty",se=e=>{var n,t,i,a,o;let{resume:r,selected:c,single:d,hidden:p,onSelect:v,visibility:h,vacancy:b,trls:g,isQuestion:k,isBottomSheet:w}=e;var C,F,M;null!==(n=r.title)&&void 0!==n&&null!==(t=n[0])&&void 0!==t&&t.string||Z.default.log("out error",new Error("Empty resume title"),{resume:{title:r.title,titleFirst:null===(C=r.title)||void 0===C?void 0:C[0],titleString:null===(F=r.title)||void 0===F||null===(M=F[0])||void 0===M?void 0:M.string,accessType:r.accessType,isIncomplete:r.isIncomplete,...r._attributes}});const{hash:P,isIncomplete:D}=r,O=null!==(i=null===(a=r.title)||void 0===a||null===(o=a[0])||void 0===o?void 0:o.string)&&void 0!==i?i:g[te],{isMagritteResponseExpAny:H}=(0,f.Z)(),{isMobile:B}=(0,R.Z)(),$=(0,s.useCallback)((()=>{j()({vacancyId:`${null==b?void 0:b.vacancyId}`})}),[null==b?void 0:b.vacancyId]);if(H){const e=p?(0,q.jsx)(l.r,{Element:L.SPALink,to:`/applicant/resumes/edit/visibility?resume=${P}`,target:"_blank",typography:B?"label-3-regular":"label-2-regular",children:g[ee.toSettings]}):(0,q.jsx)(l.r,{Element:L.SPALink,to:`/resume/${P}`,target:"_blank","data-qa":"vacancy-response-view-resume",typography:B?"label-3-regular":"label-2-regular",onClick:$,children:g[ee.view]}),n=()=>(0,q.jsx)(_.Y,{id:`resume_${P}`,name:"resumeId",value:r.hash,checked:c,disabled:p,onChange:()=>{v(r)}}),t=!d&&w,s=!d&&!w?n():void 0,i=()=>t?n():B?void 0:e;return(0,q.jsxs)(q.Fragment,{children:[(0,q.jsxs)(E.b,{left:s,avatar:(0,q.jsx)(V.Z,{resume:r}),right:i(),children:[(0,q.jsx)(S.j,{type:"title",maxLines:1,"data-qa":"resume-title",children:O}),(0,q.jsx)(S.j,{type:"subtitle",maxLines:1,children:(0,q.jsx)(T.Z,{resume:r})})]}),!B&&(0,q.jsx)(z,{resume:r,visibility:h,vacancy:b,hidden:p,incomplete:D,visible:c,isQuestion:k})]})}const Q=d?(0,q.jsx)("span",{"data-qa":"resume-title",children:O}):(0,q.jsx)(A(),{checked:c,onChange:()=>v(r),id:`resume_${P}`,labelProps:{"data-qa":"resume-title"},disabled:p,children:O}),U=p?(0,q.jsx)(N(),{disableVisited:!0,Element:L.SPALink,to:`/applicant/resumes/edit/visibility?resume=${P}`,target:"_blank",children:g[ee.toSettings]}):(0,q.jsx)(N(),{disableVisited:!0,Element:L.SPALink,to:`/resume/${P}`,target:"_blank",className:"vacancy-response-popup-resume__link","data-qa":"vacancy-response-view-resume",onClick:$,children:(0,q.jsx)(y(),{Element:"span",size:m.TextSize.Small,children:g[ee.view]})}),W=!!D&&!k&&(0,q.jsx)("div",{className:"vacancy-response-popup-resume__hint",children:(0,q.jsx)(u.FormHint,{children:g[ne]})});return(0,q.jsxs)("div",{className:x()("vacancy-response-popup-resume",{"vacancy-response-popup-resume_selected":c}),children:[(0,q.jsxs)("div",{className:"vacancy-response-popup-resume__title",children:[(0,q.jsx)(I(),{right:!0,children:Q}),U]}),(0,q.jsx)(X,{resume:r,visibility:h,vacancy:b,hidden:p}),W]})};se.displayName="components/VacancyResponseForm/Resume/Resume";const ie=(0,h.Z)(se),ae="vacancy.response.popup.resumes",oe="vacancy.questionResponse.popup.resumes",re="vacancy.response.popup.hidden.resumes",ce="vacancy.response.popup.resumes.action.showMore",le="vacancy.response.popup.resumes.action.showLess",de=e=>{let{trls:n,responseStatus:t,resumes:m,selectedResume:h,isQuestionResponse:b,setSelectedResume:x,onResumeSelected:g,isBottomSheet:j}=e;const R=t.shortVacancy,_=t.hiddenResumeIds.length>0,E=1===m.length,{isMagritteResponseExpAny:S}=(0,f.Z)(),L=!j&&m.length>3,k=(0,s.useRef)(null),I=(0,s.useRef)(m.reduce(((e,n)=>(n.id===h.id?e.unshift(n):e.push(n),e)),[])),[w,N]=(0,s.useState)(!0),{collapsibleClasses:C}=(0,i.u)(k,!w),A=e=>{var n;const s=()=>{x(e),null==g||g(),window.requestAnimationFrame((()=>{k.current&&(k.current.style.maxHeight="max-content")}))};return(0,q.jsx)(a.Z,{padding:16,borderRadius:16,showBorder:!0,stretched:!0,actionCard:!0,onClick:s,children:(0,q.jsx)(ie,{resume:e,single:E,hidden:t.hiddenResumeIds.includes(String(e.id)),selected:e.id===h.id,onSelect:s,visibility:null===(n=t.resumeVisibility)||void 0===n?void 0:n[e.id],vacancy:R,isQuestion:b,isBottomSheet:j})},e.hash)};return S?(0,q.jsxs)("div",{children:[(0,q.jsxs)(o.z,{default:12,children:[_&&(0,q.jsx)(r.x,{typography:"label-3-regular",children:n[re]}),I.current.slice(0,L?3:1/0).map(A)]}),L&&(0,q.jsxs)(o.z,{default:12,children:[(0,q.jsxs)("div",{className:C,ref:k,children:[(0,q.jsx)(c.X,{default:12}),(0,q.jsx)(o.z,{default:12,children:I.current.slice(3).map(A)})]}),(0,q.jsx)(l.r,{Element:"button",iconRight:w?(0,q.jsx)(d.Z,{}):(0,q.jsx)(p.Z,{}),disabled:!w&&I.current.findIndex((e=>e.id===h.id))>=3,onClick:e=>{e.preventDefault(),N(!w)},children:w?(0,v.formatToReactComponent)(n[ce],{"{0}":m.length-3}):n[le]})]})]}):(0,q.jsxs)(q.Fragment,{children:[(0,q.jsx)("div",{className:"vacancy-response-popup-subtitle",children:(0,q.jsx)(y(),{strong:!0,children:n[b?oe:ae]})}),(0,q.jsxs)("div",{className:"vacancy-response-popup-resume-list","data-qa":"vacancy-response-resume-list",children:[_&&(0,q.jsx)(u.FormItem,{children:n[re]}),m.map((e=>{var n;return(0,q.jsx)(ie,{resume:e,selected:e.id===h.id,single:E,hidden:t.hiddenResumeIds.includes(String(e.id)),onSelect:()=>x(e),visibility:null===(n=t.resumeVisibility)||void 0===n?void 0:n[e.id],vacancy:R,isQuestion:b},e.hash)}))]})]})};de.displayName="components/VacancyResponseForm/ResumeSelector/ResumeSelector";const pe=(0,h.Z)(de)},88642:function(e,n,t){t.d(n,{Xw:()=>W,sc:()=>z});var s=t(66600),i=t(43529),a=t.n(i),o=t(84128),r=t.n(o),c=t(90751),l=t.n(c),d=t(47367),p=t.n(d),u=t(95946),m=t(90420),y=t(85426),v=t.n(y),h=t(20115),f=t.n(h),b=t(88894),x=t.n(b),g=t(87339),j=t.n(g),R=t(396),_=t.n(R),E=t(58479),S=t(63537),L=t(19912),k=t(11288),I=t(62540),w=t(20567),N=t(70275),C=t(97033),A=t(83505),Z=t(42993),V=t(8232),T=t(99400),F=t(57796);const M="vacancy.view.notify.questionResponse.text",P="vacancy.view.notify.action.text",q=e=>{let{trls:n,openChatik:t,removeNotification:s}=e;return(0,F.jsx)(T.Z,{removeNotification:s,addon:(0,F.jsx)(V.Z,{initial:"positive"}),actionLabel:n[P],onAction:()=>{t(),s()},children:(0,F.jsx)(Z.x,{style:"contrast",typography:"label-2-regular",children:n[M]})})};q.displayName="components/VacancyResponseForm/VacancyQuestionNotification/VacancyQuestionNotification";const D=(0,k.Z)(q),O="vacancy-response-first",H="vacancy.view.notify.response.title",B="vacancy.view.notify.response.stats",$="vacancy.view.notify.response.chat",Q="vacancy.view.response.openChat",U=e=>{let{trls:n,readPercent:t,topicId:i,vacancyId:a,openChatik:o}=e;(0,s.useEffect)((()=>_().setItem(O,"true")),[]);const c=(0,s.useRef)(null);return(0,s.useEffect)((()=>{c.current&&r()(c.current,{vacancyId:a})}),[a]),(0,F.jsxs)(F.Fragment,{children:[(0,F.jsx)(j(),{children:n[H]}),(0,F.jsx)("div",{ref:c,children:t&&t>0?(0,E.format)(n[B],{"{0}":t}):n[$]}),"SPAM"!==i&&(0,F.jsx)(x(),{children:(0,F.jsx)(f(),{appearance:h.LinkAppearance.Pseudo,onClick:o,"data-qa":"vacancy-response-notification__open-chat-link",children:n[Q]})})]})};U.displayName="components/VacancyResponseForm/VacancyResponseNotification/VacancyResponseNotification";const W={Element:(0,k.Z)(U),kind:"ok",autoClose:null!==_().getItem(O)},z=e=>{let{data:n,employerId:t,setResponseData:s,publishedForResponseResumeHash:i,topLevelSite:o,addNotification:r,isQuestionResponse:c,openChatik:d}=e;const y=e=>{var t,y,h,f;const b=Number(n.vacancy_id),x=null==n||null===(t=n.responseStatus)||void 0===t||null===(y=t.shortVacancy)||void 0===y||null===(h=y.area)||void 0===h?void 0:h["@id"];(0,N.y1)(S.Fd,n.vacancy_id)&&v()();const g=(0,N.y1)(S._X,n.vacancy_id);g&&(0,L.CN)(x,b,g,"VACANCY");const j=(0,N.ac)(S.Tj,String(x));j&&(0,L.CN)(x,b,j,"AREA");const R={label:n.response_label,params:{product_id:b}};n.sendGAAnalyticsToStorage?((0,m.default)(R),(0,u.default)(R),a().sendEvent("b2c","response","beacon_test")):(l()(R),p()(R),a().sendEvent("b2c","response","beacon_test"),o===I.Dc.ZP&&a().addEventPixels("ZP_PURCHASE")),o===I.Dc.RU&&a().addEventPixels("B2C_VACANCY_RESPONSE_COMPLETE");const _=n.respondedWithResume;if(c)return void r(D,{props:{openChatik:d}});if(_&&i===_.hash&&null!==(f=_.autoHideTime)&&void 0!==f&&f.length)return void r(A.Z,{props:{resumeHash:i,autoHideTime:_.autoHideTime[0].string}});const E={readPercent:e,topicId:n.topic_id,vacancyId:b};if(s){const e=n.responseStatus.negotiations.topicList.find((e=>String(e.id)===n.topic_id)),t=n.chat_id?Number(n.chat_id):void 0;s({...E,hasResponseLetter:!(null==e||!e.hasResponseLetter),chatId:t})}else n.askJobSearchStatus?r(C.Z,{props:{vacancyId:b},uniqueType:!0}):r(W,{props:{...E,openChatik:d}})};!t||i?y(null):w.ZP.get("/employer/stats",{params:{employerId:t}}).then((e=>{let{stats:n}=e;return y(n.readTopicPercent)}),(()=>y(null)))}},94865:function(e,n,t){t.d(n,{O:()=>we,Z:()=>Ve});var s=t(66600),i=t(56732),a=t(38266),o=t(65528),r=t.n(o),c=t(90952),l=t(50900),d=t(57863),p=t(90062),u=t(69052),m=t.n(u),y=t(396),v=t.n(y),h=t(56211),f=t(52446),b=t(98719),x=t(52119),g=t(22525),j=t(4996),R=t(11288),_=t(82509),E=t(93435),S=t(33767),L=t(15124),k=t(18785),I=t(99210),w=t(4142),N=t(20567),C=t(57154),A=t(92024),Z=t(99751),V=t(66570),T=t(24532),F=t(52031),M=t(38498),P=t(12229),q=t.n(P),D=t(20115),O=t.n(D),H=t(24226),B=t(57796);const $={bloko:{applied:{text:"vacancy.response.resumes.applied",link:"vacancy.response.resumes.applied.link"},invited:{text:"vacancy.response.resumes.invitation",link:"vacancy.response.resumes.invitation.link"}},magritte:{applied:{text:"vacancy.response.alreadyResponded.applied.short",link:"vacancy.response.alreadyResponded.applied.link.short"},invited:{text:"vacancy.response.alreadyResponded.invitation.short",link:"vacancy.response.alreadyResponded.invitation.link.short"}},openChat:"vacancy.view.response.openChat",chat:"vacancy.view.response.chat"},Q=e=>{var n;let{visible:t,topics:i,resumes:a,trls:o,isFromPopup:r}=e;const l=null===(n=(0,s.useContext)(c.KD))||void 0===n?void 0:n.openChatik,{isMagritteResponseExpAny:d}=(0,_.Z)(),u=(0,E.v)((e=>{let{topLevelDomain:n}=e;return n||""})),m=(0,E.v)((e=>{let{chatik:n}=e;return(null==n?void 0:n.chatikOrigin)||""})),y=i.filter((e=>!!a[e.resumeId]));if(!t||!y.length)return null;const v=d?$.magritte:$.bloko,h=y.find((e=>!!e.invited)),f=h||y[0],b=o[h?v.invited.text:v.applied.text],x=o[h?v.invited.link:v.applied.link],g=(0,H.Z)({chatId:f.chatId,hhtmFromLabel:"vacancy_response_page",chatikOrigin:m||`https://chatik.${u}`}),j=()=>{"function"==typeof l&&l({chatId:f.chatId,hhtmFromLabel:"vacancy_response_page"})},R=()=>{const e=1===y.length&&f&&!!l;if(d)return e?(0,B.jsx)(Z.r,{"data-qa":"open-vacancy-chat",...r?{Element:"a",href:g,target:"_blank"}:{Element:"button",onClick:j},children:o[$.chat]}):(0,B.jsx)(Z.r,{Element:p.SPALink,to:"/applicant/negotiations",children:x});const n=r?(0,B.jsx)(O(),{"data-qa":"open-vacancy-chat",href:g,target:"_blank",children:o[$.openChat]}):(0,B.jsx)(O(),{"data-qa":"open-vacancy-chat",Element:q(),onClick:j,children:o[$.openChat]});return e?n:(0,B.jsx)(O(),{disableVisited:!0,Element:p.SPALink,to:"/applicant/negotiations",children:x})};return d?(0,B.jsx)(V.Z,{style:"neutral",padding:16,borderRadius:16,stretched:!0,children:(0,B.jsx)(T.b,{left:(0,B.jsx)(M.Z,{}),right:R(),children:(0,B.jsx)(F.j,{children:b})})}):(0,B.jsxs)("div",{className:"vacancy-response",children:[b," ",R()]})};Q.displayName="components/VacancyResponseForm/AlreadyRespondedPlate/AlreadyRespondedPlate";const U=(0,R.Z)(Q);var W=t(59705),z=t(42993),G=t(14611),Y=t(88316),K=t.n(Y),J=t(80856),X=t.n(J),ee=t(43529),ne=t.n(ee),te=t(57585);const se="vacancy.response.popup.lastLetter",ie="vacancy.response.popup.letterWasUsed",ae=e=>{let{setLetter:n,trls:t}=e;const i=(0,E.v)((e=>{var n;return null===(n=e.lastVacancyResponseInfo)||void 0===n?void 0:n.letter})),[a,o]=(0,te.Z)(!1),r=(0,s.useRef)(null);if((0,s.useEffect)((()=>{if(r.current){const{stopSpying:e}=ne().sendHHEventElementShown(r.current,{name:"use_letter_from_previous_response"});return()=>e()}}),[]),!i)return null;return(0,B.jsxs)("div",{className:"vacancy-response-popup-letter",children:[(0,B.jsx)(m(),{base:2}),a?(0,B.jsx)(K(),{importance:Y.TextImportance.Tertiary,children:t[ie]}):(0,B.jsx)(O(),{appearance:D.LinkAppearance.Pseudo,onClick:()=>{o(),n(i),ne().sendHHEventButtonClick("use_letter_from_previous_response")},"data-qa":"vacancy-response-use-last-letter",ref:r,children:t[se]})]})};ae.displayName="components/VacancyResponseForm/LastLetterLink/LastLetterLink";const oe=(0,R.Z)(ae),re={expand:"vacancy.response.popup.letter",title:"vacancy.response.popup.letter",questionTitle:"vacancy.response.popup.questionLetter",addLetter:"applicant.negotiations.write",placeholder:"vacancy.response.popup.letter.placeholder",questionPlaceholder:"vacancy.response.popup.question.placeholder",letterRequired:"vacancy.response.popup.letter.required.placeholder",requiredDescription:"vacancy.response.popup.letter.requiredDescription",requiredDescriptionMobile:"vacancy.response.popup.letter.requiredDescription.mobile",add:"vacancy.response.popup.letter.add"},ce=e=>{let{expanded:n,expandLetter:t,value:i,setLetterValue:a,required:o,maxLength:r,isBottomSheet:c,isModal:l,isQuestionLetter:d,trls:p}=e;const[u,m]=(0,s.useState)(i.length>r),{isMagritteResponseExpAny:y,isMagritteResponseExpC:v}=(0,_.Z)();if(y){if(!n){return c||v&&l?null:(0,B.jsx)(V.Z,{padding:16,borderRadius:16,stretched:!0,showBorder:!0,actionCard:!0,"data-qa":"vacancy-response-letter-toggle",onClick:t,children:(0,B.jsx)(T.b,{right:(0,B.jsx)(z.x,{Element:"span",style:"accent",typography:"label-2-regular",children:p[re.add]}),children:(0,B.jsx)(z.x,{Element:"span",typography:"label-2-regular",children:p[re.title]})})})}return(0,B.jsx)(G.K,{value:i,elevatePlaceholder:d,placeholder:p[d?re.questionPlaceholder:re.title],description:o&&!d?p[c?re.requiredDescriptionMobile:re.requiredDescription]:"",layout:"hug",maxLength:r,invalidLimit:u,"data-qa":"vacancy-response-popup-form-letter-input",onValidate:e=>{let{invalidLimit:n}=e;m(n)},onChange:e=>{a(e.target.value)}})}return n?(0,B.jsxs)(B.Fragment,{children:[!c&&(0,B.jsx)("div",{className:"vacancy-response-popup-subtitle",children:(0,B.jsx)(K(),{strong:!0,children:p[d?re.questionTitle:re.title]})}),(0,B.jsx)(X(),{maxLength:r,noresize:!0,autogrow:!0,minHeight:100,maxHeight:c?400:0,value:i,placeholder:c&&!d?p[re[o?"letterRequired":"placeholder"]]:void 0,"data-qa":"vacancy-response-popup-form-letter-input",onChange:e=>a(e.target.value)}),!d&&c&&(0,B.jsx)(oe,{setLetter:a})]}):(0,B.jsx)("div",{className:"vacancy-response-popup-letter",children:(0,B.jsx)(O(),{appearance:D.LinkAppearance.Pseudo,onClick:t,"data-qa":"vacancy-response-letter-toggle",children:p[c?re.addLetter:re.expand]})})};ce.displayName="components/VacancyResponseForm/Letter/Letter";const le=(0,R.Z)(ce);var de=t(85634);const pe="vacancy.response.popup.resumes",ue="vacancy.questionResponse.popup.resumes",me=e=>{let{trls:n,isQuestionResponse:t}=e;return(0,B.jsx)(z.x,{typography:"title-5-semibold",children:n[t?ue:pe]})};me.displayName="components/VacancyResponseForm/ResumeSelectorTitle/ResumeSelectorTitle";const ye=(0,R.Z)(me);var ve=t(23725),he=t(13266),fe=t(98965),be=t(25295),xe=t(15941),ge=t(3419),je=t(25175),Re=t(40794),_e=t(10176);const Ee="vacancy.response.popup.resumes",Se="vacancy.response.popup.hidden.resumes",Le=e=>{var n,t;let{trls:i,responseStatus:a,selectedResume:o,resumes:r,setSelectedResume:c}=e;const d=a.hiddenResumeIds.length>0,p=r.length>1,u=null==o||null===(n=o.title)||void 0===n||null===(t=n[0])||void 0===t?void 0:t.string,m=(e,n,t)=>{let s;return p&&(s=e?(0,B.jsx)(xe.Z,{}):(0,B.jsx)(ge.Z,{})),(0,B.jsx)(V.Z,{ref:t,stretched:!0,showBorder:!0,padding:16,borderRadius:16,actionCard:p,onClick:()=>{p&&"function"==typeof n&&n(!e)},children:(0,B.jsxs)(T.b,{avatar:(0,B.jsx)(Re.Z,{resume:o}),right:s,children:[(0,B.jsx)(F.j,{type:"title",maxLines:1,children:u}),(0,B.jsx)(F.j,{type:"subtitle",maxLines:1,children:(0,B.jsx)(_e.Z,{resume:o})})]})})},y=(0,s.useCallback)((e=>{const n=r.find((n=>n.hash===e.value));n&&c(n)}),[r,c]),v=r.map((e=>({value:e.hash,data:e}))),h=(0,ve.oQ)(v);return(0,B.jsxs)(l.z,{default:12,children:[d&&(0,B.jsx)(z.x,{typography:"label-3-regular",children:i[Se]}),(()=>{if(!p)return m();const e=e=>{var n,t,s,i;let{input:a,data:o}=e;return(0,B.jsxs)(T.b,{left:a,avatar:(0,B.jsx)(Re.Z,{resume:o.data}),children:[(0,B.jsx)(F.j,{type:"title",maxLines:1,children:null!==(n=null===(t=o.data)||void 0===t||null===(s=t.title)||void 0===s||null===(i=s[0])||void 0===i?void 0:i.string)&&void 0!==n?n:""}),(0,B.jsx)(F.j,{type:"subtitle",maxLines:1,children:(0,B.jsx)(_e.Z,{resume:o.data})})]})};return(0,B.jsx)(be.P,{type:"radio",value:(0,ve.j_)(o.hash,v),renderTrigger:e=>{let{expanded:n,onChange:t,ref:s}=e;return m(n,t,s)},triggerProps:{size:"medium"},renderDesktopItem:e,renderMobileItem:e,widthEqualToActivator:!0,dataProvider:h,onChange:y,renderHeader:e=>{let{onCloseBottomSheet:n}=e;return(0,B.jsx)(he.v,{title:i[Ee],right:(0,B.jsx)(fe.a,{icon:je.Z,onClick:n})})}})})()]})};Le.displayName="components/VacancyResponseForm/ResumeSelectorV2/ResumeSelectorV2";const ke=(0,R.Z)(Le);var Ie=t(88642);const we=e=>[...e.unusedResumeIds,...e.hiddenResumeIds].map((n=>e.resumes[n])),Ne=(0,d.makeSetStoreField)("applicantActivity"),Ce=[(0,C.Z)({name:"vacancy_response"})],Ae="RESPONSE_MODAL_FORM_ID",Ze=e=>{var n;let{vacancyId:t,resumes:o,submitting:r,setSubmitting:d,onResponse:u,errorCode:y,onError:R,responseStep:C,vacancyBodyFooterNodeRef:Z,vacancySource:V,needRedirect:T,isFromPopup:F,isModal:M,isBottomSheet:P,isSkipInconsistencies:q,setResponseData:D,selectedResume:O,setSelectedResume:H,postponedActions:$,isQuestionResponse:Q,render:z=(()=>{}),renderContent:G=(()=>{}),renderSubmit:Y=(()=>{}),expandLetter:K,isLetterExpanded:J,letterValue:X,setLetterValue:ee,isLetterValueEmpty:ne,isLetterRequired:te,letterMaxLength:se}=e;const ie=(0,a.useDispatch)(),ae=(0,p.usePush)(),oe=null===(n=(0,s.useContext)(c.KD))||void 0===n?void 0:n.openChatik,re=(0,E.v)((e=>e.applicantVacancyResponseStatuses[t])),ce=(0,E.v)((e=>e.publishedForResponseResumeHash)),pe=(0,E.v)((e=>e.countriesProfileVisibilityAgreement)),ue=re.negotiations.topicList,me=re.shortVacancy,ve=re.usedResumeIds.length>0,{addNotification:he}=(0,b.lm)(),fe=`vacancy_response_letter_${t}`,be=`vacancy_response_question_${t}`,xe=(0,s.useRef)(),{hhtmFromLabel:ge}=(0,E.v)((e=>{let{router:n}=e;return n.location.query})),je=V===j.Z.RelatedVacancies?"suitable_vacancies":void 0,Re=(0,E.v)((e=>{let{topLevelSite:n}=e;return n})),{isMagritteResponseExpAny:_e,isMagritteResponseExpC:Ee}=(0,_.Z)();(0,s.useEffect)((()=>{y===x.V.LetterRequired&&X.trim().length&&R(null)}),[y,X,R]);const Se=e=>{P?$.current.push(e):e()},Le=e=>{if(_e&&C&&C!==g.W.Initial)return;if(!Q&&te&&!X.trim().length)return void R(x.V.LetterRequired);d(!0),R(null);const n=!(null==e||!e.skipTest),s=new FormData(!n&&xe.current||void 0),i={vacancy_id:t,resume_hash:O.hash,ignore_postponed:!0,incomplete:O.isIncomplete,mark_applicant_visible_in_vacancy_country:!0===(null==pe?void 0:pe.confirmed),letter:X,lux:!0,withoutTest:n?"yes":"no",hhtmFromLabel:ge,hhtmSourceLabel:je};Q&&(i.response_source="APPLICANT_QUESTIONS"),Object.keys(i).forEach((e=>{s.append(e,i[e])})),N.ZP.post("/applicant/vacancy_response/popup",s).then((e=>{let{data:n}=e;if(v().removeItem(Q?be:fe),u&&u(),"SPAM"===n.topic_id)return;const s=n.chat_id?Number(n.chat_id):void 0,i=[(0,L.Ec)({vacancyId:t,data:n.responseStatus}),(0,k.t5)({vacancyId:t,labels:Q?[w.Z.Question]:[w.Z.Response]}),Ne(n.applicantActivity)];if(n.applicantActivity&&i.push(Ne(n.applicantActivity)),Q&&i.push((0,I.gf)({data:{type:"question",chatId:s},vacancyId:t})),T){var a;let e="";"responsesStreak"in n&&(e=`?responsesCount=${n.responsesStreak.responsesCount}&responsesRequired=${n.responsesStreak.responsesRequired}`),n.sendGAAnalyticsToStorage=!0,(0,Ie.sc)({isQuestionResponse:Q,dispatch:ie,data:n,employerId:null===(a=me.company)||void 0===a?void 0:a.id,publishedForResponseResumeHash:ce,topLevelSite:Re,addNotification:he,openChatik:()=>null==oe?void 0:oe({chatId:s,hhtmFromLabel:"response_notification"})}),ae(`/vacancy/${t}${e}`)}else if("responsesStreak"in n){var r;n.sendGAAnalyticsToStorage=!1,(0,Ie.sc)({isQuestionResponse:Q,dispatch:ie,data:n,employerId:null===(r=me.company)||void 0===r?void 0:r.id,setResponseData:P?D:void 0,publishedForResponseResumeHash:ce,topLevelSite:Re,addNotification:he,openChatik:()=>null==oe?void 0:oe({chatId:s,hhtmFromLabel:"response_notification"})}),!Q&&i.push((0,S.q$)({vacancyId:t,data:n.responsesStreak}))}if(!Q){const e=o.filter((e=>e.id!==O.id));e.length>0&&H(e[0])}A.U.sendEvent("vacancy_response_action"),Se((()=>ie(i))),T||Se((()=>{return e=Z,void setTimeout((()=>{null!=e&&e.current&&(0,h.default)(e.current,{topOffset:0,centered:!1})}),0);var e}))}),(e=>{var n,t,s;let{response:i}=e;const a=null==i||null===(n=i.data)||void 0===n?void 0:n.error;return"need-login"===(null==i||null===(t=i.data)||void 0===t?void 0:t.type)&&null!=i&&null!==(s=i.data)&&void 0!==s&&s.redirect_uri?ae(i.data.redirect_uri):i&&"resume-incomplete"===a&&"redirectUrl"in i.data?ae(i.data.redirectUrl):R(a||"unknown")})).finally((()=>{d(!1)}))},we=e=>{if(C===g.W.Letter)return(0,B.jsx)(le,{value:X,setLetterValue:ee,required:te,maxLength:se,isBottomSheet:P,isModal:M,expanded:J,expandLetter:K});const n=!P&&o.length>0,s=n&&!M;let i=null;n&&Ee?i=(0,B.jsx)(ke,{responseStatus:re,resumes:o,selectedResume:O,setSelectedResume:H}):n&&(i=(0,B.jsx)(de.Z,{responseStatus:re,resumes:o,selectedResume:O,setSelectedResume:H,isQuestionResponse:Q}));const a=!P&&!Q&&!q;return(0,B.jsxs)(l.z,{default:24,s:12,xs:12,children:[(0,B.jsx)(U,{visible:ve&&!r,topics:ue,resumes:re.resumes,isFromPopup:F}),(0,B.jsxs)(l.z,{default:12,children:[s&&(0,B.jsx)(ye,{isQuestionResponse:Q}),i]}),(0,B.jsx)(le,{value:X,setLetterValue:ee,isQuestionLetter:Q,required:Q||te,maxLength:se,isBottomSheet:P,isModal:M,expanded:J,expandLetter:K}),a&&(0,B.jsx)(W.Z,{inconsistencies:re.resumeInconsistencies,selectedResumeId:O.id,vacancyId:t,resumes:o}),Y({form:e})]})},Ze=e=>(0,B.jsxs)("div",{className:"vacancy-response-popup-body",children:[(0,B.jsx)(U,{visible:ve&&!r,topics:ue,resumes:re.resumes,isFromPopup:F}),!!o.length&&(0,B.jsxs)("div",{children:[(0,B.jsx)(m(),{base:2}),!P&&(0,B.jsx)(de.Z,{isQuestionResponse:Q,responseStatus:re,resumes:o,selectedResume:O,setSelectedResume:H}),(0,B.jsx)(le,{value:X,setLetterValue:ee,isQuestionLetter:Q,required:Q||te,maxLength:se,isBottomSheet:P,isModal:M,expanded:J,expandLetter:K}),!Q&&!P&&(0,B.jsx)(W.Z,{inconsistencies:re.resumeInconsistencies,selectedResumeId:O.id,vacancyId:t,resumes:o})]}),Y({form:e})]});return z({renderForm:()=>(0,B.jsx)(i.l0,{onSubmit:Le,initialValues:{skipTest:!1},decorators:Ce,render:e=>{let{handleSubmit:n,form:t}=e;return(0,B.jsxs)(f.Z,{onSubmit:n,ref:xe,name:"vacancy_response",id:Ae,children:[G(t),_e?we(t):Ze(t)]})}}),formId:Ae,isLetterTextEmpty:ne})};Ze.displayName="components/VacancyResponseForm/index/ResponseForm",Ze.propTypes={vacancyId:r().number,resumes:r().arrayOf(r().object),submitting:r().bool,setSubmitting:r().func,onResponse:r().func,errorCode:r().string,onError:r().func,vacancyBodyFooterNodeRef:r().object,submitTriggerRef:r().object,needRedirect:r().bool,isFromPopup:r().bool,isBottomSheet:r().bool,isModal:r().bool,isSkipInconsistencies:r().bool,setResponseData:r().func,selectedResume:r().object,setSelectedResume:r().func,trls:r().object,children:r().node,onSubmit:r().func,vacancySource:r().oneOf(Object.values(j.Z)),isQuestionResponse:r().bool,isLetterExpanded:r().bool,expandLetter:r().func,letterValue:r().string,setLetterValue:r().func,isLetterValueEmpty:r().bool,isLetterRequired:r().bool,letterMaxLength:r().number};const Ve=(0,R.Z)(Ze)},20507:function(e,n,t){t.d(n,{C:()=>N,Z:()=>M});var s=t(/*! react */66600),i=t(/*! @hh.ru/analytics-js */43529),a=t.n(i),o=t(/*! @hh.ru/analytics-js-events/build/xhh/applicant/response/vacancy_response_alert_primary_button_click */99559),r=t.n(o),c=t(/*! @hh.ru/analytics-js-events/build/xhh/applicant/response/vacancy_response_alert_screen_shown */73348),l=t.n(c),d=t(/*! @hh.ru/analytics-js-events/build/xhh/applicant/response/vacancy_response_alert_secondary_button_click */66330),p=t.n(d),u=t(/*! @hh.ru/analytics-js-events/build/xhh/applicant/vacancy/vacancy_response_complete */90751),m=t.n(u),y=t(/*! @hh.ru/analytics-js-events/build/xhh/applicant/vacancy/vacancy_response_complete_feed */47367),v=t.n(y),h=t(/*! @hh.ru/magritte-ui */57210),f=t(/*! @hh.ru/magritte-ui */79235),b=t(/*! @hh.ru/magritte-ui/icon */46572),x=t(/*! bloko/blocks/button */12229),g=t.n(x),j=t(/*! bloko/blocks/modal */95635),R=t.n(j),_=t(/*! HH/SendHHAnalytics */42179),E=t(/*! HHC/Debug */47108),S=t(/*! src/components/translation */11288),L=t(/*! src/hooks/useMagritteResponseExp */82509),k=t(/*! src/hooks/useSelector */93435),I=t(/*! src/models/topLevelSite */62540),w=t(/*! react/jsx-runtime */57796);const N=e=>{(0,_.default)({data:{goal:"vacancy-response-company-url"}}).catch(console.error);const n={label:"ad-vacancy",params:{product_id:e}};m()(n),v()(n),a().sendEvent("b2c","response","beacon_test")},C="vacancy.advertising.title",A="vacancy.advertising.text",Z="vacancy.advertising.goforward",V="vacancy.advertising.cancel",T="vacancy_response_vr_alert",F=e=>{let{visible:n,onClose:t,trls:i}=e;const o=(0,k.v)((e=>{var n,t,s;return null!==(n=null===(t=e.vacancyResponsePopup)||void 0===t||null===(s=t.vacancy)||void 0===s?void 0:s.vacancyId)&&void 0!==n?n:0})),c=(0,k.v)((e=>{var n,t,s;return null!==(n=null===(t=e.vacancyResponsePopup)||void 0===t||null===(s=t.vacancy)||void 0===s?void 0:s.companyUrl)&&void 0!==n?n:""})),d=(0,k.v)((e=>{let{topLevelSite:n}=e;return n})),{isMagritteResponseExpAny:u}=(0,L.Z)(),m=i[Z],y=i[V];if((0,s.useEffect)((()=>{n&&Boolean(o)&&Boolean(c)&&l()({vacancyId:`${o}`,alertName:T,hhtmSource:T})}),[n,o,c]),!c)return E.default.log("out error",new Error("Advertising vacancy without companyUrl"),{id:o}),null;const v=()=>{r()({buttonText:m,vacancyId:`${o}`,alertName:T,hhtmSource:T}),N(o),d===I.Dc.ZP&&a().addEventPixels("ZP_PURCHASE"),d===I.Dc.RU&&a().addEventPixels("B2C_VACANCY_RESPONSE_COMPLETE")},_=()=>{t(!0)},S=()=>{p()({buttonText:y,vacancyId:`${o}`,alertName:T,hhtmSource:T}),_()};return u?(0,w.jsx)(h.bZ,{visible:n,title:i[C],description:i[A],layout:"vertical",icon:(0,w.jsx)(b.Z,{}),buttons:(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)(f.z,{Element:"a",rel:"nofollow",href:c,mode:"primary",style:"accent","data-qa":"vacancy-response-link-advertising",onClick:v,children:m}),(0,w.jsx)(f.z,{mode:"secondary",style:"accent","data-qa":"vacancy-response-link-advertising-cancel",onClick:S,children:y})]}),onClose:_}):(0,w.jsxs)(R(),{visible:n,onClose:_,useBottomSheet:!0,children:[(0,w.jsx)(j.ModalHeader,{children:(0,w.jsx)(j.ModalTitle,{children:i[C]})}),(0,w.jsx)(j.ModalContent,{children:(0,w.jsx)("div",{className:"vacancy-response-popup-body",children:i[A]})}),(0,w.jsx)(j.ModalFooter,{children:(0,w.jsx)(g(),{kind:x.ButtonKind.Success,Element:"a",rel:"nofollow",href:c,"data-qa":"vacancy-response-link-advertising",onClick:v,children:m})})]})};F.displayName="components/VacancyResponsePopup/AdvertisingPopup/AdvertisingPopup";const M=(0,S.Z)(F)}}]);
//# sourceMappingURL=6836.597fe37a6672107d.js.map